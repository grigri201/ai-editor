# Markdown Editor 测试用例

## Enter 键测试

### 1. 在有序列表项末尾按 Enter
- **初始状态**：光标在 "1. 有序列表项 1" 末尾（位置 184）
- **操作**：按 Enter 键
- **期望结果**：
  - 创建新行 "2. "
  - 光标在 "2. " 后面（位置约 189）
- **实际问题（已修复）**：光标错误地跳到位置 207

### 2. 在列表项中间按 Enter
- **初始状态**：光标在列表项文本中间
- **操作**：按 Enter 键
- **期望结果**：
  - 当前行在光标位置断开
  - 光标移到新行开头
  - 不添加列表前缀

### 3. 在空列表项按 Enter
- **初始状态**：
  - 无序列表：光标在 "- " 后（空内容）
  - 有序列表：光标在 "1. " 后（空内容）
- **操作**：按 Enter 键
- **期望结果**：
  - 移除当前行的列表标记
  - 创建普通新行
  - 光标在新行开头

### 4. 在普通文本行按 Enter
- **初始状态**：光标在非列表的普通文本行
- **操作**：按 Enter 键
- **期望结果**：
  - 创建新的空行
  - 光标在新行开头

## Backspace 键测试

### 1. 在行首按 Backspace
- **初始状态**：光标在第二行或后续行的开头
- **操作**：按 Backspace 键
- **期望结果**：
  - 当前行与上一行合并
  - 光标移到上一行原内容的末尾
- **实际问题（已修复）**：光标位置计算错误

### 2. 在列表项开头按 Backspace
- **初始状态**：光标在列表标记前（行首）
- **操作**：按 Backspace 键
- **期望结果**：
  - 与上一行合并
  - 保留列表标记和内容

### 3. 在第一行行首按 Backspace
- **初始状态**：光标在第一行开头
- **操作**：按 Backspace 键
- **期望结果**：无操作（已经在文档开头）

## Tab/Shift+Tab 测试

### 1. 有序列表 Tab 增加缩进
- **初始状态**：光标在有序列表项中
- **操作**：按 Tab 键
- **期望结果**：
  - 增加 2 个空格缩进
  - 如果是新的缩进级别，序号从 1 开始
  - 如果同级别已有项，序号递增
  - 光标位置相应调整

### 2. 有序列表 Shift+Tab 减少缩进
- **初始状态**：光标在已缩进的有序列表项中
- **操作**：按 Shift+Tab 键
- **期望结果**：
  - 减少 2 个空格缩进
  - 返回上级列表时，根据上下文调整序号
  - 光标保持在行内的相对位置

### 3. 无序列表 Tab/Shift+Tab
- **初始状态**：光标在无序列表项中
- **操作**：按 Tab 或 Shift+Tab 键
- **期望结果**：
  - Tab：增加 2 个空格缩进
  - Shift+Tab：减少 2 个空格缩进
  - 保持原有的列表标记（- * +）

### 4. 光标位置保持测试
- **初始状态**：光标在列表内容中间
- **操作**：按 Shift+Tab 键
- **期望结果**：
  - 如果光标在缩进部分，移到新缩进末尾
  - 如果光标在内容部分，保持相对位置

## 中文输入测试

### 1. 组合输入（IME）
- **初始状态**：使用中文输入法
- **操作**：输入中文字符
- **期望结果**：
  - 正确处理组合输入事件
  - 不会触发多次渲染
  - 光标位置正确

## 性能测试

### 1. 快速连续输入
- **初始状态**：任意位置
- **操作**：快速连续输入多个字符
- **期望结果**：
  - 不会出现 "Maximum update depth exceeded" 错误
  - 使用防抖处理渲染
  - 输入流畅无卡顿

### 2. 大文档编辑
- **初始状态**：包含大量内容的文档
- **操作**：在不同位置进行编辑
- **期望结果**：
  - 渲染性能良好
  - 光标定位准确
  - 滚动位置保持

## 边界情况测试

### 1. 空文档
- **初始状态**：编辑器为空
- **操作**：各种键盘操作
- **期望结果**：正常处理，不报错

### 2. 特殊字符
- **测试内容**：
  - Markdown 特殊字符：`* _ # [ ] ( ) ` ~ > |`
  - HTML 字符：`< > & " '`
- **期望结果**：正确转义和显示

### 3. 嵌套列表
- **测试场景**：
  - 多级嵌套的有序/无序列表
  - 混合使用有序和无序列表
- **期望结果**：
  - 正确处理各级缩进
  - Tab/Shift+Tab 正常工作
  - Enter 键行为正确